<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>EduSaint - Create Course</title>

	<!-- Font Awesome -->
	<link
		rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
	/>

	<!-- External CSS -->
	<link rel="stylesheet" href="{{ url_for('static', filename='css/create_course.css') }}" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/admin_sidebar.css') }}" />
</head>
	<body>
	<div class="dashboard">
		{% set active = 'create_course' %}
		{% include 'admin_sidebar.html' %}

		<main class="main-content">
			<div class="header">
				<div class="header-left">
					<h1>Course Management</h1>
					<p>Create and manage your CBSE courses</p>
				</div>
				<div class="header-right">
					<div class="search-bar">
						<i class="fas fa-search"></i>
						<input type="text" placeholder="Search students, teachers, courses..." />
					</div>
					<div class="user-actions">
						<div class="notification">
							<i class="far fa-bell"></i>
							<div class="notification-badge">0</div>
						</div>
						<div class="user-profile">
							<div class="avatar">AD</div>
							<div>
								<div style="font-weight: 500;">Admin User</div>
								<div style="font-size: 0.8rem; color: var(--gray);">Administrator</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="course-creation">
				<div class="page-header">
					<h1 class="page-title">Create New Course</h1>
					<div class="page-actions">
	                    	<button type="button" class="btn btn-outline">
							<i class="fas fa-times"></i> Cancel
						</button>
	                    	<button form="courseForm" type="submit" class="btn btn-primary">
	                    		<i class="fas fa-save"></i> Save Course
	                    	</button>
					</div>
				</div>

				<form id="courseForm" class="course-form-container" method="post" action="{{ url_for('admin_bp.create_course_post') }}" enctype="multipart/form-data">
					<!-- Main Course Form -->
					<div class="course-main">
						<!-- Basic Information -->
						<div class="form-section">
							<h2 class="section-title">
								<i class="fas fa-info-circle"></i> Basic Information
							</h2>
							<div class="form-group">
								<label for="courseTitle">Course Title *</label>
								<input
									type="text"
									id="courseTitle"
									name="title"
									placeholder="e.g., Mathematics Class 10 CBSE"
								/>
							</div>
							<div class="form-group">
								<label for="courseDescription">Course Description</label>
								<textarea
									id="courseDescription"
									name="description"
									placeholder="Describe what students will learn in this course..."
								></textarea>
							</div>
						</div>

						<!-- Course Content -->
						<div class="form-section">
							<h2 class="section-title">
								<i class="fas fa-book"></i> Course Content
							</h2>
							<div class="form-group">
								<label for="courseSyllabus">Syllabus Overview</label>
								<textarea
									id="courseSyllabus"
									name="syllabus"
									placeholder="List the chapters and topics covered..."
								></textarea>
							</div>
							<div class="form-group">
								<label for="learningObjectives">Learning Objectives</label>
								<textarea
									id="learningObjectives"
									name="learning_objectives"
									placeholder="What will students be able to do after completing this course?"
								></textarea>
							</div>
						</div>

						<!-- Course Settings -->
						<div class="form-section">
							<h2 class="section-title">
								<i class="fas fa-cog"></i> Course Settings
							</h2>
							<div class="settings-grid">
								<div class="form-group">
									<label for="courseDuration">Course Duration (weeks)</label>
									<input
										type="number"
										id="courseDuration"
										name="duration"
										placeholder="e.g., 12"
									/>
								</div>
								<div class="form-group">
									<label for="weeklyHours">Weekly Study Hours</label>
									<input
										type="number"
										id="weeklyHours"
										name="weekly_hours"
										placeholder="e.g., 5"
									/>
								</div>
							</div>
							<div class="form-group">
								<label>Course Difficulty</label>
								<div class="radio-group">
									<div class="radio-item">
										<input
											type="radio"
											id="difficultyBeginner"
											name="difficulty"
											value="beginner"
										/>
										<label for="difficultyBeginner">Beginner</label>
									</div>
									<div class="radio-item">
										<input
											type="radio"
											id="difficultyIntermediate"
											name="difficulty"
											value="intermediate"
										/>
										<label for="difficultyIntermediate">Intermediate</label>
									</div>
									<div class="radio-item">
										<input
											type="radio"
											id="difficultyAdvanced"
											name="difficulty"
											value="advanced"
										/>
										<label for="difficultyAdvanced">Advanced</label>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Course Sidebar -->
					<div class="course-sidebar">
						<!-- Course Image -->
						<div class="sidebar-section">
							<h3 class="sidebar-title">
								<i class="fas fa-image"></i> Course Image
							</h3>
							<div class="image-upload">
								<!-- Hidden file input; preview image shown below -->
								<input type="file" id="thumbnail" name="thumbnail" accept="image/*" style="display:none;" />
								<img id="previewImage" src="https://via.placeholder.com/320x180.png?text=Thumbnail" alt="preview" style="width:100%;height:auto;border-radius:6px;margin-bottom:8px;" />
								<p style="margin:0;font-size:0.95rem;font-weight:600;" id="previewTitle">Course Title</p>
								<p style="margin:0 0 8px 0;font-size:0.85rem;color:var(--gray);" id="previewDesc">Course description will appear here.</p>
								<p id="previewCategory" style="margin:0 0 4px 0;font-size:0.85rem;color:var(--gray);">Category: -</p>
								<p id="previewClass" style="margin:0 0 8px 0;font-size:0.85rem;color:var(--gray);">Class: -</p>
								<p style="font-size: 0.8rem; margin-bottom:8px;">Recommended: 400x300px</p>
								<button class="upload-btn">Choose Image</button>
								<button id="resetBtn" type="button" class="btn" style="margin-left:8px;">Reset</button>
								<button id="openLessonBtn" type="button" style="display:none;">Open Lesson</button>
							</div>
						</div>

						<!-- Course Category -->
						<div class="sidebar-section">
							<h3 class="sidebar-title">
								<i class="fas fa-layer-group"></i> Category & Class
							</h3>
							<div class="form-group">
								<label for="courseCategory">Subject Category *</label>
								<select id="courseCategory" name="category">
									<option value="">Select Category</option>
									<option value="mathematics">Mathematics</option>
									<option value="science">Science</option>
									<option value="social-science">Social Science</option>
									<option value="english">English</option>
									<option value="hindi">Hindi</option>
									<option value="computer">Computer Science</option>
									<option value="physics">Physics</option>
									<option value="chemistry">Chemistry</option>
									<option value="biology">Biology</option>
								</select>
							</div>
							<div class="form-group">
								<label for="courseClass">Class *</label>
								<select id="courseClass" name="class">
									<option value="">Select Class</option>
									<option value="9">Class 9</option>
									<option value="10">Class 10</option>
									<option value="11">Class 11</option>
									<option value="12">Class 12</option>
								</select>
							</div>
							<div class="form-group">
								<label for="courseStream">Stream (For 11-12)</label>
								<select id="courseStream" name="stream">
									<option value="">Select Stream</option>
									<option value="science">Science</option>
									<option value="commerce">Commerce</option>
									<option value="arts">Arts</option>
								</select>
							</div>
						</div>

						<!-- Course Type -->
						<div class="sidebar-section">
							<h3 class="sidebar-title">
								<i class="fas fa-play-circle"></i> Course Type
							</h3>
							<div class="radio-group">
								<div class="radio-item">
									<input
										type="radio"
										id="typeVideo"
										name="course_type"
										value="video"
										checked
									/>
									<label for="typeVideo">Video Course</label>
								</div>
								<div class="radio-item">
									<input
										type="radio"
										id="typeLive"
										name="course_type"
										value="live"
									/>
									<label for="typeLive">Live Classes</label>
								</div>
								<div class="radio-item">
									<input
										type="radio"
										id="typeHybrid"
										name="course_type"
										value="hybrid"
									/>
									<label for="typeHybrid">Hybrid (Video + Live)</label>
								</div>
								<div class="radio-item">
									<input
										type="radio"
										id="typeSelfPaced"
										name="course_type"
										value="self-paced"
									/>
									<label for="typeSelfPaced">Self-Paced</label>
								</div>
							</div>
						</div>

						<!-- Tags -->
						<div class="sidebar-section">
							<h3 class="sidebar-title">
								<i class="fas fa-tags"></i> Course Tags
							</h3>
							<div class="form-group">
								<div class="tags-input-container">
									<div class="tag">
										CBSE <span class="tag-remove">×</span>
									</div>
									<div class="tag">
										Mathematics <span class="tag-remove">×</span>
									</div>
									<input
										type="text"
										class="tags-input"
										name="tags"
										placeholder="Add tags..."
									/>
								</div>
							</div>
						</div>

						<!-- Pricing -->
						<div class="sidebar-section">
							<h3 class="sidebar-title">
								<i class="fas fa-tag"></i> Pricing
							</h3>
							<div class="pricing-options">
								<div class="pricing-option selected" data-value="paid">
									<i class="fas fa-rupee-sign"></i>
									<div>Paid Course</div>
								</div>
								<div class="pricing-option" data-value="free">
									<i class="fas fa-lock-open"></i>
									<div>Free Course</div>
								</div>
							</div>
							<div class="form-group" style="margin-top: 15px;">
								<label for="coursePrice">Course Price (₹)</label>
								<input
									type="number"
									id="coursePrice"
									name="price"
									placeholder="e.g., 2999"
								/>
							</div>
						</div>

						<!-- Visibility -->
						<div class="sidebar-section">
							<h3 class="sidebar-title">
								<i class="fas fa-eye"></i> Visibility
							</h3>
							<div class="form-group">
								<div class="checkbox-item">
									<input type="checkbox" id="coursePublished" name="published" />
									<label for="coursePublished">Publish Course</label>
								</div>
								<div class="checkbox-item">
									<input type="checkbox" id="featuredCourse" name="featured" />
									<label for="featuredCourse">Feature this course</label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</main>
	</div>


	<!-- (preview elements are now inside the sidebar image-upload area) -->

	<!-- External JS -->
	<script>
	// Wire the visible upload button to the hidden file input
	document.addEventListener('DOMContentLoaded', function () {
		const uploadBtn = document.querySelector('.upload-btn');
		const thumbnailInput = document.getElementById('thumbnail');
		if (uploadBtn && thumbnailInput) {
			uploadBtn.addEventListener('click', function (e) {
				e.preventDefault();
				thumbnailInput.click();
			});
		}

		// Cancel button: confirm and navigate back to admin dashboard
		const cancelBtn = document.querySelector('.page-actions .btn-outline');
		if (cancelBtn) {
			cancelBtn.addEventListener('click', function (e) {
				e.preventDefault();
				if (confirm('Discard changes and leave this page?')) {
					window.location.href = '/admin/dashboard';
				}
			});
		}
	});
	</script>
	<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
	<script src="{{ url_for('static', filename='js/create_course.js') }}"></script>
</body>
</html>
